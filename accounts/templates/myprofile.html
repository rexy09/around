{% extends 'base.html' %}
{% load static %}
{% block content %}

<body>

   {% include 'profile_header.html' %}

    <div class="container-fluid mt-2">
        <div class="row mb-3" style="height: 100%">
            <div
                class="col-xl-2 col-lg-2 col-md-12 col-sm-12 col-xs-12 d-none d-sm-none d-md-none d-lg-block d-xl-block p-0">
                <h5 class="font-weight-bold p-1 ml-2">Settings</h5>
                <div class="vertical-nav">
                    <div class="nav flex-column ml-3">
                        <h6 class=" font-weight-bold ml-2">Edit Profile</h6>
                        <div class="mr-5">
                            <hr class="m-0">
                        </div>
                        
                        
                            <a class="nav-link d-flex flex-row" href="{% url 'accounts:business_info' %}">
                                <small class="text-dark navlinkclr">Business Info</small>
                            </a>
                        
                        
                            <a class="nav-link d-flex flex-row" href="{% url 'accounts:business_details' %}">
                                <small class="text-dark navlinkclr">Business details</small>
                            </a>
                        
                        
                            <a class="nav-link d-flex flex-row" href="{% url 'accounts:cover' %}">
                                <small class="text-dark navlinkclr">Cover image</small>
                            </a>
                        
                        
                            <a class="nav-link d-flex flex-row" href="{% url 'accounts:profileimg' %}">
                                <small class="text-dark navlinkclr">Profile image</small>
                            </a>
                        
                        
                            <a class="nav-link d-flex flex-row" href="{% url 'accounts:product' %}">
                                <small class="text-dark navlinkclr">Products</small>
                            </a>
                        
                        
                            <a class="nav-link d-flex flex-row" href="{% url 'accounts:gallery' %}">
                                <small class="text-dark navlinkclr">Gallery</small>
                            </a>
                        

                    </div>

                    <ul class="nav flex-column ml-3">
                        <h6 class=" font-weight-bold ml-2">Account Settings</h6>
                        <div class="mr-5">
                            <hr class="m-0">
                        </div>
                        <li class="nav-item">
                            <a class="nav-link d-flex flex-row" href="{% url 'accounts:password_change' %}">
                                <small class="navlinkcl text-dark">Change password</small>
                            </a>
                        </li>


                    </ul>


                </div>
            </div>

            <!-- Begining of profile page -->
            <div class="col-xl-8 col-lg-8 col-md-12 col-sm-12 col-xs-12">

                <div class="row">
                    <div class="col mt-2 p-0">
                        <div class=""
                            style="position: relative; left: 0; top: 0; box-shadow: 0px 0px 10px 2px rgba(32, 33, 36, 0.28);">
                            {% for cover in covers %}
                            <img class="" src="{{ cover.image.url }}" alt="cover" width="100%" height="auto"
                                style="position: relative; top: 0; left: 0;">
                            {% empty %}
                            
                            <img class="" src="{% static 'img/no-image.png' %}" alt="cover" width="100%" height="auto"
                                style="position: relative; top: 0; left: 0;">

                            {% endfor %}
                        </div>

                    </div>
                </div>
                <div class="row mt-4">
                    <div class="col">
                        <div class="d-flex flex-row justify-content-start align-items-center">
                            {% for logo in logoimg %}
                            <img class="rounded-circle ml-2 mr-3" src="{{ logo.image.url }}" alt="" height="100px"
                                width="100px">
                            {% empty %}
                            <img class="rounded-circle ml-2 mr-3" src="{% static 'icon/default-image-profile.png' %}" alt="" height="100px"
                                width="100px">
                            {% endfor %}
                            {% for name in info %}
                            <h3 class="font-weight-bold">{{ name.business_name }}</h3>
                            {% empty %}
                            <h3 class="font-weight-bold text-secondary">No business name</h3>
                            {% endfor %}
                        </div>
                    </div>
                </div>
                <style>
                   
                </style>
                <div class="row mt-5">
                    <div class="col-md-12 col-lg-12 col-xl-12 col-xs-12 col-sm-12">
                        <div class="d-flex justify-content-center">
                            <h1 class="font-weight-bold" style="font-size: 3rem;">Details</h1>
                        </div>
                        <div style="height: 5px; background-color:#ff9900; width:80px;"
                            class="ml-auto mr-auto mt-2 mb-3"></div>
                        {% for detail in details %}
                        <pre style="font-size: 1.2rem;" class="text-center text-secondary text-wrap"
                            style="font-family:Arial, Helvetica, sans-serif;">
                            {{ detail.description|linebreaks }}
                        </pre>
                        {% empty %}
                        <p style="font-size: 1.2rem;" class="text-center text-secondary text-wrap"
                        style="font-family:Arial, Helvetica, sans-serif;">No business details !!!
                    </p>
                        {% endfor %}
                    </div>

                </div>
               
                <div class="row mt-5">
                    <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12">
                        <div class="d-flex justify-content-center">
                            <h1 class="font-weight-bold" style="font-size: 3rem;">Contacts</h1>
                        </div>
                        <div style="height: 5px; background-color:#ff9900; width:80px;"
                            class="ml-auto mr-auto mt-2 mb-3"></div>

                            {% for detail in details %}
                        <div class="d-flex flex-column justify-content-center text-secondary">
                            <div class=" d-flex flex-row justify-content-center">
                                <div class="mx-2">
                                    <i class="fas fa-at fa-2x"></i>
                                </div>
                                <div class="" style="font-size: 1.5rem;">
                                    {{detail.email}}
                                </div>
                               
                            </div>
                            <div class=" d-flex flex-row justify-content-center mt-3">
                                <div class="mx-2" >
                                    <i class="fas fa-mobile-alt fa-2x"></i>
                                </div>
                                <div class="" style="font-size: 1.5rem;">
                                    {{detail.phone}}
                                </div>
                               
                            </div>

                        </div>
                        
                        {% empty %}
                        <p style="font-size: 1.1em;" class="text-center text-secondary text-wrap">
                            No Contacts !!!
                         </p>
                        {% endfor %}
                    </div>

                </div>
                <!-- Mapbox CDN -->
                <script src='https://api.mapbox.com/mapbox-gl-js/v1.8.1/mapbox-gl.js'></script>
                <link href='https://api.mapbox.com/mapbox-gl-js/v1.8.1/mapbox-gl.css' rel='stylesheet' />

                <div class="row mt-5 p-2">
                    <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12">
                        <div class="d-flex justify-content-center">
                            <h1 class="font-weight-bold">Map location</h1>
                        </div>
                        <div style="height: 5px; background-color:#ff9900; width:80px;"
                            class="ml-auto mr-auto mt-2 mb-3"></div>
                        
                        <div id='map' style='width: 100%; height: 200px;'></div>
                        {%  for detail in details %}
                        <script type="text/javascript">
                            mapboxgl.accessToken =
                                'pk.eyJ1IjoicmV4eTA5IiwiYSI6ImNrM2V3YnpkMTAybHYzbW9kbnQxMnY0NnIifQ.ttNaEZzE8nFpHXyPBZTnFQ';

                                
                                var lng = '{{detail.longitude}}';
                                var lat = '{{detail.latitude}}';
                                

                            var map = new mapboxgl.Map({
                                container: 'map',
                                style: 'mapbox://styles/mapbox/streets-v11',
                                center: [lng, lat],
                                zoom: 13,
                            });

                            // create the popup
                            var popup = new mapboxgl.Popup({ offset: 25 }).setText(
                                'My location'
                                );

                            //MapBox Marker
                            var marker = new mapboxgl.Marker({ 

                            })
                            .setLngLat([lng, lat])
                            .setPopup(popup) // sets a popup on this marker
                            .addTo(map);
                            var popup = new mapboxgl.Popup({ closeOnClick: false })
                            .setLngLat([lng, lat])
                            .setHTML('<h6>My location</h6>')
                            .addTo(map);

                            // MapBox Controls
                            map.addControl(
                                new mapboxgl.GeolocateControl({
                                    positionOptions: {
                                        enableHighAccuracy: true
                                    },
                                    trackUserLocation: true
                                })
                            );
                            map.addControl(new mapboxgl.FullscreenControl());
                            map.addControl(new mapboxgl.NavigationControl());
                        </script>
                        {% empty %}
                        <h4 class="text-secondary text-center">Location is not set </h4>
                        {% endfor %}

                    </div>
                </div>
                <!-- media -->
                <div class="row mt-5">
                    <div class="col-12">
                        <div class="d-flex justify-content-center">
                            <h1 class="font-weight-bold display-4" style="font-size: 2.2rem;">Products & Services</h1>
                        </div>
                        <div style="height: 5px; background-color:#ff9900; width:80px;"
                            class="ml-auto mr-auto mt-2 mb-3"></div>
                            <div class="d-flex justify-content-end">
                                <a href="{% url 'accounts:products_all' %}" class="h5">View all</a>
                            </div>
                        <div class="d-flex flex-row overflow-auto">
                            {% for product in products %}
                            <div>
                                <div class="card m-2" style="width: 18rem; height:25rem;">
                                    <img src="{{ product.image.url }}" class="card-img-top border-0" height="200" width="100%" alt="..." style="object-fit: contain;">
                                    <div class="card-body">
                                        <h5 class="card-title">{{ product.title }}</h5>
                                        <div style="overflow:hidden; height:5rem;">
                                            <p class="card-text" style="line-height: 1; "><small>{{ product.details }}</small></p>
                                        </div>
                                       
                                        <p class="card-text">{{ product.price }}/=</p>
                                    </div>
                                    <div class="d-flex justify-content-end">
                                        <a href="{% url 'accounts:product_view' product.id %}" class="btn btn-primary btn-sm p-1 mr-2">View Product</a>
                                    </div>                                    
                                    <div class="d-flex justify-content-end">
                                        <a href="{% url 'accounts:product_edit' product.id %}" class=" text-decoration-none text-primary p-2"><i class="fas fa-pencil-alt"></i></a>
                                        <a href="{% url 'accounts:product_delete' product.id %}" class=" text-decoration-none text-danger p-2"><i class="far fa-trash-alt"></i></a>
                                    </div>              
                                </div>
                            </div>
                            {% empty %}
                            <div>
                                <div class="card m-2" style="width: 18rem; height:25rem;">
                                    <img src="{% static 'img/no-image.png' %}" class="card-img-top border-0 pt-1" height="200" width="100%" alt="..." style="object-fit: contain;">
                                    <div class="card-body">
                                        <h5 class="card-title text-secondary">Product title</h5>
                                        <div style="text-overflow:ellipsis; overflow:hidden; height:5rem;">
                                            <p class="card-text text-secondary" style="line-height: 1; "><small>Product discription......</small></p>
                                        </div>
                                       
                                        <p class="card-text text-secondary">Price/=</p>
                                    </div>
                                    
                                    <div class="d-flex justify-content-end">
                                        <a href="#" class=" text-decoration-none text-primary p-2"><i class="fas fa-pencil-alt"></i></a>
                                        <a href="#" class=" text-decoration-none text-danger p-2"><i class="far fa-trash-alt"></i></a>
                                    </div>              
                                </div>
                            </div>
                            {% endfor %}
                            
                        </div>
                    </div>
                </div>
                <div class="row my-5 p-2">
                    <div class="col-12">
                        
                    </div>
                    <div class="col-12">
                        <style>
                            /* Hide the images by default */
                            .mySlides {
                                display: none;
                            }

                            /* Add a pointer when hovering over the thumbnail images */
                            .cursor {
                                cursor: pointer;
                            }

                          
                            .next {
                                right: 0;
                                border-radius: 3px 0 0 3px;
                            }

                            /* On hover, add a black background color with a little bit see-through */
                            .prev:hover,
                            .next:hover {
                                background-color: rgba(0, 0, 0, 0.8);
                            }
        
                        </style>
                        <div class="d-flex justify-content-center">
                            <h1 class="font-weight-bold" style="font-size: 3rem;">Gallery</h1>
                        </div>
                        <div style="height: 5px; background-color:#ff9900; width:80px;"
                            class="ml-auto mr-auto mt-2 mb-3"></div>
                        <div class="">
                            <div style="width: 100%;">
                                {% for photo in photos %}
                                <div class="mySlidess text-center">
                                    <img src="{{ photo.image.url }}" class="" style="object-fit: contain;"
                                        width="100%" height="300">
                                </div>
                                {% empty %}
                                <div class="mySlidess text-center">
                                    <img src="{% static 'img/no-image.png' %}" class="" style="object-fit: contain;"
                                        width="100%" height="300">
                                </div>
                                {% endfor %}
                                
                            </div>
                            <a class="prev align-middle" onclick="plusSlides(-1)">❮</a>
                            <a class="next align-middle" onclick="plusSlides(1)">❯</a>
                        </div>
                    </div>
                </div>
                <!-- <div class="row my-5 p-2">
                    <div class="col-xl-6 col-lg-6 col-md-6 col-sm-12 col-xs-12">
                        <h3 class="font-weight-bolder">Orders & Inquiries</h3>
                        <div style="height: 5px; background-color:#ff9900; width:80px;"
                            class="ml-aut mr-auto mt-2 mb-3"></div>
                        <form>
                            <div class="form-row">
                                <div class="form-group col-md-6">
                                    <label for="inputEmail4">Full name</label>
                                    <input type="text" class="form-control" id="inputEmail4" placeholder="Full name">
                                </div>
                                <div class="form-group col-md-6">
                                    <label for="inputPassword4">Phone number</label>
                                    <input type="text" class="form-control" id="inputPassword4"
                                        placeholder="Phone number">
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="inputAddress">Email Address</label>
                                <input type="email" class="form-control" id="inputAddress" placeholder="Email">
                            </div>
                            <div class="form-group">
                                <label for="inputAddress2">Message</label>
                                <textarea class="form-control" id="exampleFormControlTextarea1" rows="3"
                                    placeholder="Write your text here"></textarea>
                            </div>

                            <button type="submit" class="btn btn-primary">Send</button>
                        </form>
                    </div>

                </div> -->
            </div>
            <div class="col-xl-2 col-lg-2 col-md-12 col-sm-12 col-xs-12 rounded-lg d-none d-sm-none d-md-none d-lg-block d-xl-block p-2"
                style="background-color: #ffffff">

                <h4> Ads</h4>
            </div>
        </div>
    </div>
    {% include 'footer.html' %}
</body>
{% endblock %}